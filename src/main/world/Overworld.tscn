[gd_scene load_steps=29 format=2]

[ext_resource path="res://assets/ui/xolonium-36.tres" type="DynamicFont" id=1]
[ext_resource path="res://src/main/world/overworld.gd" type="Script" id=2]
[ext_resource path="res://src/main/ui/VersionLabel.tscn" type="PackedScene" id=3]
[ext_resource path="res://src/main/world/turbo.gd" type="Script" id=4]
[ext_resource path="res://assets/world/checker.png" type="Texture" id=5]
[ext_resource path="res://src/main/world/slippery-kinematic-body.gd" type="Script" id=6]
[ext_resource path="res://assets/world/customer/movement-sheet.png" type="Texture" id=7]
[ext_resource path="res://src/main/world/turbo-trace.gd" type="Script" id=9]
[ext_resource path="res://assets/ui/xolonium-24.tres" type="DynamicFont" id=10]
[ext_resource path="res://assets/world/environment.tres" type="Environment" id=11]
[ext_resource path="res://assets/world/purple-box-library.tres" type="MeshLibrary" id=12]
[ext_resource path="res://assets/world/overworld-material-outline.tres" type="Material" id=13]
[ext_resource path="res://src/main/ui/cheat-code-detector.gd" type="Script" id=14]
[ext_resource path="res://assets/ui/cheat-enable.wav" type="AudioStream" id=15]
[ext_resource path="res://assets/ui/cheat-disable.wav" type="AudioStream" id=16]
[ext_resource path="res://FpsLabel.tscn" type="PackedScene" id=18]

[sub_resource type="CubeMesh" id=1]
size = Vector3( 36, 2, 36 )

[sub_resource type="SpatialMaterial" id=2]
params_diffuse_mode = 4
params_specular_mode = 3
albedo_color = Color( 0.2125, 0.85, 0.690625, 1 )
albedo_texture = ExtResource( 5 )
metallic_specular = 0.2
roughness = 0.15
uv1_scale = Vector3( 27, 18, 1 )

[sub_resource type="BoxShape" id=3]
extents = Vector3( 18, 1, 18 )

[sub_resource type="SphereMesh" id=4]

[sub_resource type="BoxShape" id=5]
extents = Vector3( 0.65, 0.85, 0.5 )

[sub_resource type="Animation" id=6]
resource_name = "walk-sw"
length = 0.6
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath("Sprite3D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.1, 0.2, 0.3, 0.4, 0.5 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ 0, 1, 2, 3, 4, 5 ]
}

[sub_resource type="CylinderMesh" id=7]

[sub_resource type="SpatialMaterial" id=8]
flags_unshaded = true
params_cull_mode = 1
params_grow = true
params_grow_amount = 0.08
albedo_color = Color( 0.423529, 0.262745, 0.192157, 1 )

[sub_resource type="SpatialMaterial" id=9]
next_pass = SubResource( 8 )
params_diffuse_mode = 4
params_specular_mode = 3
albedo_color = Color( 0.85, 0.2125, 0.371875, 1 )
metallic_specular = 0.2
roughness = 0.15

[sub_resource type="CylinderShape" id=10]

[sub_resource type="SphereMesh" id=11]

[sub_resource type="SpatialMaterial" id=12]
next_pass = SubResource( 8 )
params_diffuse_mode = 4
params_specular_mode = 3
albedo_color = Color( 0.85, 0.371875, 0.2125, 1 )
metallic_specular = 0.2
roughness = 0.15

[node name="Spatial" type="Spatial"]
script = ExtResource( 2 )

[node name="PuzzleButton" type="Button" parent="."]
margin_left = 10.0
margin_top = 530.0
margin_right = 70.0
margin_bottom = 590.0
custom_fonts/font = ExtResource( 1 )
text = "P"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="FpsLabel" parent="." instance=ExtResource( 18 )]
visible = false

[node name="VersionLabel" parent="." instance=ExtResource( 3 )]

[node name="Floor" type="StaticBody" parent="."]

[node name="MeshInstance" type="MeshInstance" parent="Floor"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0 )
mesh = SubResource( 1 )
material/0 = SubResource( 2 )

[node name="CollisionShape" type="CollisionShape" parent="Floor"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0 )
shape = SubResource( 3 )

[node name="GridMap" type="GridMap" parent="."]
mesh_library = ExtResource( 12 )
cell_size = Vector3( 2, 1.2, 2 )
data = {
"cells": PoolIntArray( 2, 0, 2, 3, 0, 2, 2, 1, 2, 3, 1, 2, 2, 2, 2, 3, 2, 2, 2, 3, 2, 3, 3, 2, 65529, 3, 2, 65530, 3, 2, 2, 4, 2, 3, 4, 2, 4, 4, 2, 5, 4, 2, 65528, 4, 2, 65529, 4, 2, 65530, 4, 2, 65531, 4, 2, 131065, 4, 1, 131066, 4, 1, 2, 5, 2, 3, 5, 2, 4, 5, 2, 5, 5, 2, 65528, 5, 2, 65529, 5, 2, 65530, 5, 2, 65531, 5, 2, 131065, 5, 1, 131066, 5, 1, 0, 6, 2, 1, 6, 2, 2, 6, 2, 3, 6, 2, 4, 6, 2, 5, 6, 2, 6, 6, 2, 7, 6, 2, 65528, 6, 2, 65529, 6, 2, 65530, 6, 2, 65531, 6, 2, 65534, 6, 2, 65535, 6, 2, 65536, 6, 1, 65537, 6, 1, 65538, 6, 1, 65539, 6, 1, 131065, 6, 1, 131066, 6, 1, 131070, 6, 1, 131071, 6, 1, 131072, 6, 0, 131073, 6, 0, 196606, 6, 0, 196607, 6, 0, 0, 7, 2, 1, 7, 2, 2, 7, 2, 3, 7, 2, 4, 7, 2, 5, 7, 2, 6, 7, 2, 7, 7, 2, 65529, 7, 2, 65530, 7, 2, 65534, 7, 2, 65535, 7, 2, 65536, 7, 1, 65537, 7, 1, 65538, 7, 1, 65539, 7, 1, 131070, 7, 1, 131071, 7, 1, 131072, 7, 0, 131073, 7, 0, 196606, 7, 0, 196607, 7, 0, 0, 65528, 2, 1, 65528, 2, 2, 65528, 2, 3, 65528, 2, 4, 65528, 2, 5, 65528, 2, 6, 65528, 2, 65528, 65528, 2, 65529, 65528, 2, 65530, 65528, 2, 65531, 65528, 2, 65532, 65528, 2, 65533, 65528, 2, 65534, 65528, 2, 65535, 65528, 2, 131066, 65528, 1, 131067, 65528, 1, 131068, 65528, 1, 131069, 65528, 1, 196602, 65528, 0, 196603, 65528, 0, 0, 65529, 2, 1, 65529, 2, 2, 65529, 2, 3, 65529, 2, 4, 65529, 2, 5, 65529, 2, 6, 65529, 2, 65528, 65529, 2, 65529, 65529, 2, 65530, 65529, 2, 65531, 65529, 2, 65532, 65529, 2, 65533, 65529, 2, 65534, 65529, 2, 65535, 65529, 2, 131066, 65529, 1, 131067, 65529, 1, 131068, 65529, 1, 131069, 65529, 1, 196602, 65529, 0, 196603, 65529, 0, 4, 65530, 2, 5, 65530, 2, 65528, 65530, 2, 65529, 65530, 2, 65530, 65530, 2, 65531, 65530, 2, 65532, 65530, 2, 65533, 65530, 2, 131066, 65530, 1, 131067, 65530, 1, 196602, 65530, 0, 196603, 65530, 0, 4, 65531, 2, 5, 65531, 2, 65528, 65531, 2, 65529, 65531, 2, 65530, 65531, 2, 65531, 65531, 2, 65532, 65531, 2, 65533, 65531, 2, 131066, 65531, 1, 131067, 65531, 1, 196602, 65531, 0, 196603, 65531, 0, 4, 65532, 2, 5, 65532, 2, 65528, 65532, 2, 65529, 65532, 2, 65530, 65532, 2, 65531, 65532, 2, 131066, 65532, 1, 131067, 65532, 1, 4, 65533, 2, 5, 65533, 2, 65528, 65533, 2, 65529, 65533, 2, 65530, 65533, 2, 65531, 65533, 2, 131066, 65533, 1, 131067, 65533, 1, 2, 65534, 2, 3, 65534, 2, 4, 65534, 2, 5, 65534, 2, 65530, 65534, 2, 65531, 65534, 2, 131066, 65534, 1, 131067, 65534, 1, 2, 65535, 2, 3, 65535, 2, 4, 65535, 2, 5, 65535, 2, 65530, 65535, 2, 65531, 65535, 2, 131066, 65535, 1, 131067, 65535, 1 )
}
__meta__ = {
"_editor_clip_": 0,
"_editor_floor_": Vector3( 0, 1, 0 )
}

[node name="Turbo" type="KinematicBody" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0 )
script = ExtResource( 4 )

[node name="Sprite3D" type="Sprite3D" parent="Turbo"]
transform = Transform( 0.707107, -0.353553, 0.612372, 0, 0.866025, 0.5, -0.707107, -0.353553, 0.612372, 0, 0.73, 0 )
offset = Vector2( 0, -160 )
pixel_size = 0.004
texture = ExtResource( 7 )
vframes = 2
hframes = 8

[node name="ShadowMesh" type="MeshInstance" parent="Turbo"]
transform = Transform( 0.459619, 0, 0.353553, 0, 0.85, 0, -0.459619, 0, 0.353553, 0.35, -0.15, 0.35 )
cast_shadow = 3
mesh = SubResource( 4 )
material/0 = null

[node name="CollisionShape" type="CollisionShape" parent="Turbo"]
transform = Transform( 0.707107, 0, 0.707107, 0, 1, 0, -0.707107, 0, 0.707107, 0.35, -0.15, 0.35 )
shape = SubResource( 5 )

[node name="CameraTarget" type="Spatial" parent="Turbo"]
transform = Transform( 0.707107, -0.353553, 0.612372, 0, 0.866025, 0.5, -0.707107, -0.353553, 0.612372, 30, 25, 30 )

[node name="CoyoteTimer" type="Timer" parent="Turbo"]
wait_time = 0.13
one_shot = true

[node name="JumpBuffer" type="Timer" parent="Turbo"]
wait_time = 0.13
one_shot = true

[node name="Label" type="Label" parent="Turbo"]
visible = false
margin_right = 40.0
margin_bottom = 30.0
custom_fonts/font = ExtResource( 10 )
script = ExtResource( 9 )
__meta__ = {
"_edit_use_anchors_": false,
"_editor_description_": "Prints diagnostic information about the player's jumping status to the screen. Type 'coyote' from the overworld enable this."
}

[node name="AnimationPlayer" type="AnimationPlayer" parent="Turbo"]
anims/walk-sw = SubResource( 6 )

[node name="Red" type="KinematicBody" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 6, 2.2, 2 )
script = ExtResource( 6 )
foothold_radius = 0.4

[node name="MeshInstance" type="MeshInstance" parent="Red"]
mesh = SubResource( 7 )
material/0 = SubResource( 9 )

[node name="CollisionShape" type="CollisionShape" parent="Red"]
shape = SubResource( 10 )

[node name="Blue" type="KinematicBody" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 8 )

[node name="MeshInstance" type="MeshInstance" parent="Blue"]
mesh = SubResource( 7 )
material/0 = ExtResource( 13 )

[node name="CollisionShape" type="CollisionShape" parent="Blue"]
shape = SubResource( 10 )

[node name="InterpolatedCamera" type="InterpolatedCamera" parent="."]
transform = Transform( 0.707107, -0.353553, 0.612373, 0, 0.866026, 0.5, -0.707107, -0.353553, 0.612373, 30, 25, 30 )
environment = ExtResource( 11 )
projection = 1
current = true
size = 14.0
target = NodePath("../Turbo/CameraTarget")
speed = 6.0
enabled = true

[node name="DirectionalLight2" type="DirectionalLight" parent="."]
transform = Transform( -0.5, -0.709407, 0.496732, 0, 0.573576, 0.819152, -0.866025, 0.409576, -0.286788, 0, 20, 0 )
light_energy = 0.33
shadow_enabled = true
directional_shadow_mode = 0
directional_shadow_normal_bias = 0.0

[node name="Sphere" type="MeshInstance" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -4, 1, -4 )
mesh = SubResource( 11 )
material/0 = SubResource( 12 )

[node name="CheatCodeDetector" type="Node" parent="."]
script = ExtResource( 14 )
codes = [ "coyote", "bigfps" ]

[node name="CheatEnabledSound" type="AudioStreamPlayer" parent="."]
stream = ExtResource( 15 )
volume_db = -4.0
bus = "Reverb Bus"

[node name="CheatDisabledSound" type="AudioStreamPlayer" parent="."]
stream = ExtResource( 16 )
volume_db = -4.0
bus = "Reverb Bus"
[connection signal="pressed" from="PuzzleButton" to="." method="_on_PuzzleButton_pressed"]
[connection signal="cheat_detected" from="CheatCodeDetector" to="." method="_on_CheatCodeDetector_cheat_detected"]
